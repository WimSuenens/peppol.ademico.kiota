# Peppol C# SDK

## Technnically - How has the client SDK been generated by Kiota?

## Install

```bash
dotnet tool install --global Microsoft.OpenApi.Kiota
```

## Generate

### Command Line Interface

```bash
kiota generate -l CSharp --clean-output `
    -c PeppolAdemicoApiClient `
    -n Peppol.Ademico.Kiota `
    -o ./Client `
    -d https://ademico-software.com/peppol-rest-api/openapi.json `
    --include-path /api/peppol/v1/tools/connectivity `
    --include-path /api/peppol/v1/legal-entities `
    --include-path /api/peppol/v1/legal-entities/* `
    --include-path /api/peppol/v1/legal-entities/*/peppol-registrations `
    --include-path /api/peppol/v1/legal-entities/*/peppol-registrations/* `
    --include-path /api/peppol/v1/invoices/ubl-submissions `
    --include-path /api/peppol/v1/notifications `
    --include-path /api/peppol/v1/notifications/* `
    --include-path /api/peppol/v1/invoices/*/ubl `
    --include-path /api/peppol/v1/invoice-responses```

```bash
kiota generate -l CSharp --clean-output \
    -c PeppolAdemicoApiClient  \
    -n Peppol.Ademico.Kiota  \
    -o ./Client  \
    -d ./OpenApi/v1_9.json  \
    --include-path /api/peppol/v1/tools/connectivity  \
    --include-path /api/peppol/v1/legal-entities  \
    --include-path /api/peppol/v1/legal-entities/*  \
    --include-path /api/peppol/v1/legal-entities/*/peppol-registrations  \
    --include-path /api/peppol/v1/legal-entities/*/peppol-registrations/*  \
    --include-path /api/peppol/v1/invoices/ubl-submissions  \
    --include-path /api/peppol/v1/notifications  \
    --include-path /api/peppol/v1/notifications/*  \
    --include-path /api/peppol/v1/invoices/*/ubl  \
    --include-path /api/peppol/v1/invoice-responses
```

## Build & publish as a NuGet package

```
dotnet pack ./Peppol.Ademico.Kiota/Peppol.Ademico.Kiota.csproj 
```

## CI/CD Pipeline

This repository includes an automated CI/CD pipeline that publishes NuGet packages when pull requests are merged to the main branch.

### Setup Requirements

To enable automated publishing, you need to configure GitHub Secrets:

- **[GitHub Secrets Setup Guide](docs/github-secrets-setup.md)** - Complete setup instructions
- **[Quick Reference](docs/secrets-quick-reference.md)** - Quick setup checklist

### How It Works

1. When a PR is merged to main, the workflow automatically:
   - Increments the package version based on commit messages
   - Builds and tests the package
   - Publishes to nuget.org
   - Creates a git tag with the new version

2. Version increment rules:
   - **Patch** (default): Regular commits
   - **Minor**: Commits with `feat:` prefix or `enhancement` PR label
   - **Major**: Commits with `BREAKING CHANGE:` or `breaking-change` PR label

## Links

- [Kiota - The NEW OpenAPI Client Generator](https://www.youtube.com/watch?v=nk9BUPKgN_k&ab_channel=GuiFerreira)

